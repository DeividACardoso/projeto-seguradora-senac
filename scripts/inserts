create schema seguradora;
use seguradora;

CREATE TABLE TIPO_PESSOA (
  ID INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
  NOME VARCHAR(500),
  TIPO_PESSOA VARCHAR(100)
);
CREATE TABLE ENDERECO (
  ID INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
  NUMERO INT,
  CEP CHAR(8),
  RUA VARCHAR(100),
  BAIRRO VARCHAR(100),
  CIDADE VARCHAR(100),
  ESTADO CHAR(2)
);

CREATE TABLE PESSOA (
  ID INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
  NOME VARCHAR(255),
  CPF CHAR(11),
  DTNASCIMENTO DATETIME,
  TELEFONE CHAR(9),
  ID_ENDERECO INT NOT NULL,
  ID_TIPO_PESSOA INT NOT NULL,
  FOREIGN KEY (ID_ENDERECO) REFERENCES ENDERECO(ID),
  FOREIGN KEY (ID_TIPO_PESSOA) REFERENCES TIPO_PESSOA(ID),
   UNIQUE INDEX (NOME)
);

CREATE TABLE SEGURO(
  ID INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
  ID_SEGURADO INT NOT NULL,
  FOREIGN KEY (ID_SEGURADO) REFERENCES PESSOA(ID),
  NUMERO_PROPOSTA CHAR(8),
  PLACA_VEICULO varchar(7),
  DT_INICIO_VIGENCIA DATETIME,
  DT_FIM_VIGENCIA DATETIME,
  RCF_DANOS_MATERIAIS INT,
  RCF_DANOS_CORPORAIS INT,
  FRANQUIA VARCHAR(50),
  ASSISTENCIA VARCHAR(100),
  CARRO_RESERVA INT
);

CREATE TABLE VEICULO (
  ID INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
  PLACA_VEICULO CHAR(8),
  MODELO VARCHAR(50),
  ID_SEGURO INT NOT NULL,
  FOREIGN KEY (ID_SEGURO) REFERENCES SEGURO(ID),
  UNIQUE INDEX (PLACA_VEICULO)
);

CREATE TABLE SINISTRO (
  ID INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
  NUMERO_SINISTRO VARCHAR(10),
  TIPO_SINISTRO VARCHAR(50),
  SEGURADO VARCHAR(255),
  PLACA_VEICULO CHAR(8),
  DT_SINISTRO DATETIME,
  VALOR_FRANQUIA INT,
  VALOR_ORCADO INT,
  VALOR_PAGO INT,
  SITUACAO INT,
  MOTIVO VARCHAR(255),
  FOREIGN KEY (SEGURADO) REFERENCES PESSOA(NOME),
  FOREIGN KEY (PLACA_VEICULO) REFERENCES VEICULO(PLACA_VEICULO)
);